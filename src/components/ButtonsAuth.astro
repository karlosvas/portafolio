---
import ModalAuth from './ModalAuth.astro'
---

<ModalAuth/>
<nav class="sm:block hidden text-whitePal mt-10 sm:mt-0" id="navLog">
   <ul class="flex">
      <li>
         <button id="login"
            class="mx-3 rounded select-none border-b-4 border-indigo-800 bg-indigo-500 hover:bg-indigo-400 px-4 py-2 hover:border-indigo-300 font-semibold transition-background-color duration-900 ">
            Cargando...
         </button>
      </li>
      <li>
         <button id="register"
            class="mx-3 rounded select-none border-b-4 border-indigo-800 bg-indigo-500 hover:bg-indigo-400 px-4 py-2 hover:border-indigo-300 font-semibold transition-background-color duration-900">
            Register
         </button>
      </li>
   </ul>
</nav>
<script type="module">
import { stateAuthFirebase, signOutUser } from '/functions/oauth2-0.js';
   // AuthState, Para verificar el estado de los botones
   stateAuthFirebase('login');

   // Eventos de los botones de login, register y close
   ['btnClose', 'register', 'login'].forEach(id => {
      let element = document.getElementById(id)
      element.addEventListener('click', (event) => {
         // Si nos deslogeamos no muestra el modal
         if(element.textContent == "Logout") 
            signOutUser();
         else {
            // Si el Hamburgermodal es visible se oculta y viceversa
            document.getElementById('resData').innerText = "";
            toggleModal(event, 'modal');
            document.getElementsByTagName('main')[0].classList.toggle('opacity-50');
         }
         stateAuthFirebase(id);      
      });
   });
</script>